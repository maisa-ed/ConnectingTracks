<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:opsz,wght@6..12,300;6..12,400;6..12,500;6..12,600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css" />
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <title>Todas as Trilhas</title>
</head>
<body>
    <div class="bg-home">
        <header>
            <nav class="header-content container">
                <div class="header-icons" data-aos="fade-down">
                    <a href="#"><i class="fa-brands fa-instagram fa-2x"></i></a>
                </div>
                <div class="header-logo" data-aos="fade-up" data-aos-delay="500">
                    <img src="assets/logo.png" alt="Logo Wings" style="width: 250px" data-aos="flip-up" data-aos-delay="300" data-aos-duration="1500" />
                </div>
            </nav>
        </header>
    </div>
    <section class="services">
        <div class="services-content container">
            <h2>Todas as Trilhas</h2>
            <div class="img-services" id="eventos-container">
                <!-- Os eventos aprovados serão inseridos aqui dinamicamente -->
            </div>
        </div>
    </section>
    <footer class="footer">
        <div class="footer-icons">
            <a href="#"><i class="fa-brands fa-instagram fa-2x"></i></a>
            <a href="#"><i class="fa-brands fa-linkedin fa-2x"></i></a>
        </div>
        <div>
            <img src="assets/logo.png" alt="logo" style="width: 250px" />
        </div>
        <p>Copyright © 2024 | Trilheiros Conectados - Todos os direitos reservados.</p>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            fetch('/eventos/todas')
                .then(response => response.json())
                .then(data => {
                    const eventosContainer = document.getElementById('eventos-container');
                    data.forEach((evento, index) => {
                        const eventoDiv = document.createElement('div');
                        eventoDiv.className = 'produto';
                        eventoDiv.setAttribute('data-aos', 'fade-up');
                        eventoDiv.setAttribute('data-aos-delay', `${150 + index * 100}`);

                        // Formatar a data no padrão brasileiro (dd/mm/aaaa)
                        const dataFormatada = formatarDataBrasileiro(evento.data);

                        eventoDiv.innerHTML = `
                            <img src="assets/servico3.jpg" alt="Evento Aprovado" />
                            <div class="prod-infoT">
                                <p><strong>${evento.nome}</strong></p>
                                <p><strong>${evento.descricao}</strong></p>
                                <p><strong>Data:</strong> ${dataFormatada}</p>
                                <p><strong>Hora:</strong> ${evento.hora}</p>
                                <p><strong>Local:</strong> ${evento.local}</p>
                                <p><strong>Tempo:</strong> ${evento.tempo}</p>
                                <p><strong>Dificuldade:</strong> ${evento.dificuldade}</p>
                                <p><strong>Link WhatsApp:</strong> <a href="${evento.linkWhats}" target="_blank">${evento.linkWhats}</a></p>
                            </div>
                        `;
                        eventosContainer.appendChild(eventoDiv);
                    });
                })
                .catch(error => console.error('Erro ao buscar eventos:', error));
        });

        document.addEventListener('DOMContentLoaded', () => {
            AOS.init();
        });

        function formatarDataBrasileiro(data) {
            const dataObj = new Date(data);
            const dia = dataObj.getDate().toString().padStart(2, '0');
            const mes = (dataObj.getMonth() + 1).toString().padStart(2, '0'); // Mês começa do zero
            const ano = dataObj.getFullYear();
            return `${dia}/${mes}/${ano}`;
        }
    </script>
</body>
</html>
